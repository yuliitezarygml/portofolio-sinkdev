import{j as e,A as K,m as S}from"./animations-CriiqVqn.js";import{r as l,u as Q,c as _,L as U}from"./router-BeDKLXm4.js";import{F as m,j as X,k as O,m as q,n as D,o as J,p as V,q as Z,r as R,s as Y,t as ee,u as te,v as W,w as oe,x as ae,y as re}from"./icons-Bp5xNpCt.js";import{M as se,h as E}from"./markdown-C6Fz617U.js";import"./vendor-Csw2ODfV.js";const ne=a=>{if(a==="/")return[{name:"Files",path:"/"}];const p=a.split("/").filter(Boolean),g=[{name:"Files",path:"/"}];let i="";for(const h of p)i+="/"+h,g.push({name:h,path:i});return g},le=(a="/")=>{const[p,g]=l.useState([]),[i,h]=l.useState(!0),[w,y]=l.useState(null);return l.useEffect(()=>{let x=!0;return(async()=>{try{h(!0),y(null);const u=await fetch(`/api/files?path=${encodeURIComponent(a)}`);if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const f=await u.json();console.log("API response:",f),x&&g(Array.isArray(f)?f:[])}catch(u){console.error("Error scanning directory:",u),x&&(y(u instanceof Error?u.message:"Unknown error"),g([]))}finally{x&&h(!1)}})(),()=>{x=!1}},[a]),{files:p,loading:i,error:w}},L={'code[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",border:"1px solid #dddddd",backgroundColor:"white"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"]::selection':{background:"#C1DEF1"},'pre[class*="language-"] ::selection':{background:"#C1DEF1"},'code[class*="language-"]::selection':{background:"#C1DEF1"},'code[class*="language-"] ::selection':{background:"#C1DEF1"},':not(pre) > code[class*="language-"]':{padding:".2em",paddingTop:"1px",paddingBottom:"1px",background:"#f8f8f8",border:"1px solid #dddddd"},comment:{color:"#008000",fontStyle:"italic"},prolog:{color:"#008000",fontStyle:"italic"},doctype:{color:"#008000",fontStyle:"italic"},cdata:{color:"#008000",fontStyle:"italic"},namespace:{Opacity:".7"},string:{color:"#A31515"},punctuation:{color:"#393A34"},operator:{color:"#393A34"},url:{color:"#36acaa"},symbol:{color:"#36acaa"},number:{color:"#36acaa"},boolean:{color:"#36acaa"},variable:{color:"#36acaa"},constant:{color:"#36acaa"},inserted:{color:"#36acaa"},atrule:{color:"#0000ff"},keyword:{color:"#0000ff"},"attr-value":{color:"#0000ff"},".language-autohotkey .token.selector":{color:"#0000ff"},".language-json .token.boolean":{color:"#0000ff"},".language-json .token.number":{color:"#0000ff"},'code[class*="language-css"]':{color:"#0000ff"},function:{color:"#393A34"},deleted:{color:"#9a050f"},".language-autohotkey .token.tag":{color:"#9a050f"},selector:{color:"#800000"},".language-autohotkey .token.keyword":{color:"#00009f"},important:{color:"#e90",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},"class-name":{color:"#2B91AF"},".language-json .token.property":{color:"#2B91AF"},tag:{color:"#800000"},"attr-name":{color:"#ff0000"},property:{color:"#ff0000"},regex:{color:"#ff0000"},entity:{color:"#ff0000"},"directive.tag.tag":{background:"#ffff00",color:"#393A34"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#a5a5a5"},".line-numbers .line-numbers-rows > span:before":{color:"#2B91AF"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(193, 222, 241, 0.2) 70%, rgba(221, 222, 241, 0))"}},A={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:"#1e1e1e"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{Opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}},ce=({file:a,isOpen:p,onClose:g})=>{const[i,h]=l.useState(""),[w,y]=l.useState(!1),[x,b]=l.useState(null),[u,f]=l.useState(!1),[d,k]=l.useState(!1);l.useEffect(()=>{const o=()=>{k(document.documentElement.classList.contains("light-theme"))};o();const s=new MutationObserver(o);return s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),l.useEffect(()=>{if(!a||!p){h(""),b(null),f(!1);return}F()},[a,p]);const F=async()=>{if(a){y(!0),b(null);try{const o=await fetch(`/Files${a.path}`);if(!o.ok)throw new Error(`Failed to load file: ${o.status}`);if(z(a.extension)||j(a.extension)||H(a.extension)||C(a.extension)){const s=await o.text();h(s)}}catch(o){console.error("Error loading file:",o),b(o instanceof Error?o.message:"Unknown error")}finally{y(!1)}}},z=o=>o?["txt","js","ts","tsx","jsx","html","css","py","java","cpp","c","xml","yml","yaml","log"].includes(o.toLowerCase()):!1,j=o=>o?.toLowerCase()==="md",H=o=>o?.toLowerCase()==="json",v=o=>o?["png","jpg","jpeg","gif","webp","svg","bmp"].includes(o.toLowerCase()):!1,N=o=>o?.toLowerCase()==="pdf",C=o=>j(o)||v(o)||N(o),P=()=>!a||!i?null:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(E,{language:j(a.extension)?"markdown":"text",style:d?L:A,className:"h-full rounded-lg scrollable-code",customStyle:{margin:0,padding:"1rem",fontSize:"14px",lineHeight:"1.5",maxHeight:"100%"},showLineNumbers:!0,wrapLines:!1,lineProps:o=>({style:{backgroundColor:o%2===0?"rgba(255, 255, 255, 0.04)":"transparent",transition:"background-color 0.15s ease",cursor:"text",display:"block",padding:"0"},onMouseEnter:s=>{s.target.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onMouseLeave:s=>{s.target.style.backgroundColor=o%2===0?"rgba(255, 255, 255, 0.04)":"transparent"}}),children:i})}),B=()=>{if(!a)return null;if(u&&C(a.extension))return P();if(v(a.extension))return e.jsx("div",{className:"h-full overflow-auto flex items-center justify-center",children:e.jsx("img",{src:`/Files${a.path}`,alt:a.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:o=>b("Failed to load image")})});if(N(a.extension))return e.jsx("div",{className:"h-full overflow-hidden",children:e.jsx("iframe",{src:`/Files${a.path}`,className:"w-full h-full rounded-lg border-0",title:a.name})});if(j(a.extension))return e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"h-full p-6 bg-zinc-800/50 rounded-lg prose prose-invert prose-sm max-w-none",style:{overflow:"auto",scrollbarWidth:"thin",scrollbarColor:"#9CA3AF #374151"},children:e.jsx(se,{components:{code({node:o,inline:s,className:c,children:t,...r}){const n=/language-(\w+)/.exec(c||"");return!s&&n?e.jsx(E,{style:d?L:A,language:n[1],PreTag:"div",className:"rounded-lg",...r,children:String(t).replace(/\n$/,"")}):e.jsx("code",{className:"bg-zinc-700 px-1 py-0.5 rounded text-sm font-mono",...r,children:t})},h1:({children:o})=>e.jsx("h1",{className:"text-2xl font-bold text-white mb-4 border-b border-gray-600 pb-2",children:o}),h2:({children:o})=>e.jsx("h2",{className:"text-xl font-semibold text-white mb-3 mt-6",children:o}),h3:({children:o})=>e.jsx("h3",{className:"text-lg font-medium text-white mb-2 mt-4",children:o}),p:({children:o})=>e.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:o}),ul:({children:o})=>e.jsx("ul",{className:"text-gray-300 mb-4 pl-6 space-y-1",children:o}),ol:({children:o})=>e.jsx("ol",{className:"text-gray-300 mb-4 pl-6 space-y-1",children:o}),li:({children:o})=>e.jsx("li",{className:"list-disc",children:o}),blockquote:({children:o})=>e.jsx("blockquote",{className:"border-l-4 border-blue-500 pl-4 py-2 bg-blue-500/10 rounded-r-lg mb-4 text-gray-300 italic",children:o}),strong:({children:o})=>e.jsx("strong",{className:"text-white font-semibold",children:o}),em:({children:o})=>e.jsx("em",{className:"text-gray-200 italic",children:o}),a:({children:o,href:s})=>e.jsx("a",{href:s,className:"text-blue-400 hover:text-blue-300 underline",target:"_blank",rel:"noopener noreferrer",children:o})},children:i})})});if(H(a.extension)){let o=i;try{const s=JSON.parse(i);o=JSON.stringify(s,null,2)}catch{}return e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(E,{language:"json",style:d?L:A,className:"h-full rounded-lg scrollable-code",customStyle:{margin:0,padding:"1rem",fontSize:"14px",lineHeight:"1.5",maxHeight:"100%"},showLineNumbers:!0,wrapLines:!1,lineProps:s=>({style:{backgroundColor:s%2===0?"rgba(255, 255, 255, 0.04)":"transparent",transition:"background-color 0.15s ease",cursor:"text",display:"block",padding:"0"},onMouseEnter:c=>{c.target.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onMouseLeave:c=>{c.target.style.backgroundColor=s%2===0?"rgba(255, 255, 255, 0.04)":"transparent"}}),children:o})})}if(z(a.extension)){const s=(c=>({js:"javascript",ts:"typescript",tsx:"tsx",jsx:"jsx",py:"python",java:"java",cpp:"cpp",c:"c",html:"html",css:"css",xml:"xml",yml:"yaml",yaml:"yaml"})[c?.toLowerCase()||""]||"text")(a.extension);return s!=="text"?e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(E,{language:s,style:d?L:A,className:"h-full rounded-lg scrollable-code",customStyle:{margin:0,padding:"1rem",fontSize:"14px",lineHeight:"1.5",maxHeight:"100%"},showLineNumbers:!0,wrapLines:!1,lineProps:c=>({style:{backgroundColor:c%2===0?"rgba(255, 255, 255, 0.04)":"transparent",transition:"background-color 0.15s ease",cursor:"text",display:"block",padding:"0"},onMouseEnter:t=>{t.target.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onMouseLeave:t=>{t.target.style.backgroundColor=c%2===0?"rgba(255, 255, 255, 0.04)":"transparent"}}),children:i})}):e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"h-full p-4 bg-black/50 rounded-lg text-sm text-gray-300 font-mono leading-relaxed relative",style:{overflow:"auto",scrollbarWidth:"thin",scrollbarColor:"#9CA3AF #374151"},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 pr-4 text-gray-500 text-right select-none border-r border-gray-600 mr-4",children:i.split(`
`).map((c,t)=>e.jsx("div",{className:"leading-relaxed",children:t+1},t))}),e.jsx("div",{className:"flex-1",children:i.split(`
`).map((c,t)=>e.jsx("div",{className:"whitespace-pre-wrap break-words leading-relaxed",children:c},t))})]})})})}return e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{icon:D,className:"text-4xl mb-4"}),e.jsx("p",{children:"Preview not available for this file type"}),e.jsxs("p",{className:"text-sm mt-2",children:["Extension: ",a.extension]})]})})},$=()=>a?v(a.extension)?J:N(a.extension)?V:D:D,T=o=>{if(!o)return"";const s=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(o)/Math.log(1024));return Math.round(o/Math.pow(1024,c)*100)/100+" "+s[c]};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .scrollable-code {
          overflow: auto !important;
          scrollbar-width: auto !important;
          scrollbar-color: #9CA3AF #374151 !important;
        }
        .scrollable-code::-webkit-scrollbar {
          width: 12px !important;
          height: 12px !important;
        }
        .scrollable-code::-webkit-scrollbar-track {
          background: #374151 !important;
          border-radius: 6px !important;
        }
        .scrollable-code::-webkit-scrollbar-thumb {
          background: #9CA3AF !important;
          border-radius: 6px !important;
          border: 2px solid #374151 !important;
        }
        .scrollable-code::-webkit-scrollbar-thumb:hover {
          background: #D1D5DB !important;
        }
        .scrollable-code::-webkit-scrollbar-corner {
          background: #374151 !important;
        }
        
        /* VS Code ÑÑ‚Ð¸Ð»ÑŒ Ð·ÐµÐ±Ñ€Ñ‹ Ð´Ð»Ñ ÐºÐ¾Ð´Ð° */
        .scrollable-code pre {
          background: transparent !important;
        }
        
        .scrollable-code code {
          background: transparent !important;
        }
        
        /* Ð”Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð° - Ñ‚Ð¾Ð»ÑŒÐºÐ¾ hover Ð±ÐµÐ· Ð·ÐµÐ±Ñ€Ñ‹ */
        .text-line {
          padding: 2px 8px;
          margin: 0 -8px;
          transition: background-color 0.15s ease;
        }
        
        .text-line:hover {
          background-color: rgba(255, 255, 255, 0.05);
        }
      `}),e.jsx(K,{children:p&&a&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.9)"},onClick:g,children:e.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-6xl h-[90vh] bg-zinc-900 rounded-xl border border-white/20 flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{icon:$(),className:"text-xl text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:a.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[a.size&&e.jsx("span",{children:T(a.size)}),a.extension&&e.jsx("span",{className:"uppercase",children:a.extension})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(a.extension)&&e.jsx("button",{onClick:()=>f(!u),className:`p-2 rounded-lg transition-colors ${u?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white"}`,title:u?"Show preview":"Show source",children:e.jsx(m,{icon:X})}),e.jsx("a",{href:`/Files${a.path}`,download:a.name,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",title:"Download file",children:e.jsx(m,{icon:O})}),e.jsx("button",{onClick:g,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:e.jsx(m,{icon:q})})]})]}),e.jsx("div",{className:"flex-1 p-4 min-h-0",children:w?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-2 border-white/30 border-t-white rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading file..."})]})}):x?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-red-400",children:[e.jsx("p",{className:"text-lg mb-2",children:"Error loading file"}),e.jsx("p",{className:"text-sm",children:x})]})}):B()})]})})})]})},pe=()=>{const a=Q(),p=_();l.useEffect(()=>{const t=localStorage.getItem("theme")||"system",r=document.documentElement;t==="white"?(r.classList.add("light-theme"),r.classList.remove("dark-theme")):t==="black"||window.matchMedia("(prefers-color-scheme: dark)").matches?(r.classList.add("dark-theme"),r.classList.remove("light-theme")):(r.classList.add("light-theme"),r.classList.remove("dark-theme"))},[]);const g=()=>{const t=a.pathname.replace("/files","");return t===""?"/":t},[i,h]=l.useState(g()),{files:w,loading:y}=le(i),[x,b]=l.useState(null),[u,f]=l.useState(!1),[d,k]=l.useState(""),[F,z]=l.useState([]);l.useEffect(()=>{const t=g();t!==i&&h(t)},[a.pathname]);const j=l.useCallback(async()=>{const t=[],r=async n=>{try{const M=await fetch(`/api/files?path=${encodeURIComponent(n)}`);if(!M.ok)return;const G=await M.json();for(const I of G)t.push(I),I.type==="folder"&&await r(I.path)}catch(M){console.error("Error scanning directory:",M)}};await r("/"),z(t)},[]);l.useEffect(()=>{j()},[]);const v=l.useMemo(()=>d?F.filter(t=>t.type==="file"&&(t.name.toLowerCase().includes(d.toLowerCase())||t.extension?.toLowerCase().includes(d.toLowerCase()))):[...w].sort((t,r)=>t.type==="folder"&&r.type==="file"?-1:t.type==="file"&&r.type==="folder"?1:t.name.localeCompare(r.name)),[d,F,w]),N=t=>{const r=t==="/"?"/files":`/files${t}`;p(r)},C=t=>{const r=t==="/"?"/files":`/files${t}`;p(r)},P=async t=>{try{const r=`/api/download-folder?path=${encodeURIComponent(t)}`,n=document.createElement("a");n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(r){console.error("Error downloading folder:",r)}},B=t=>{b(t),f(!0)},$=()=>{f(!1),b(null)},T=t=>t?["txt","md","json","js","ts","tsx","jsx","html","css","py","java","cpp","c","xml","yml","yaml","log","png","jpg","jpeg","gif","webp","svg","bmp","pdf"].includes(t.toLowerCase()):!1,o=(t,r)=>{if(r==="folder")return R;if(!t)return W;const n=t.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(n)?J:["mp4","avi","mov","wmv","flv"].includes(n)?oe:["mp3","wav","flac","aac"].includes(n)?ae:["js","ts","tsx","jsx","py","java","cpp","c","html","css","json","sql","md","txt"].includes(n)?D:n==="pdf"?V:["zip","rar","7z","tar","gz"].includes(n)?re:["exe","msi","dmg","app"].includes(n)?W:W},s=t=>{if(!t)return"";const r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,n)*100)/100+" "+r[n]},c=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-theme-primary text-theme-primary",children:[e.jsx(S.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5},className:"fixed top-0 left-0 right-0 z-40",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))",backdropFilter:"blur(40px) saturate(200%) brightness(110%)",WebkitBackdropFilter:"blur(40px) saturate(200%) brightness(110%)",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:e.jsx("nav",{className:"container-custom",children:e.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20",children:[e.jsxs(U,{to:"/",className:"flex items-center gap-3 text-gray-300 hover:text-white transition-colors",children:[e.jsx(m,{icon:Z,className:"icon-keep-color"}),e.jsx("span",{className:"font-medium",children:"Back to Home"})]}),e.jsx(U,{to:"/",className:"text-xl md:text-2xl font-bold tracking-tight",children:"SinkDev"}),e.jsx("div",{className:"w-20"})]})})}),e.jsx("main",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"container-custom",children:[e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm flex-1 min-w-0",children:[e.jsx(m,{icon:R,className:"text-gray-400 flex-shrink-0 icon-keep-color"}),e.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:ne(i).map((t,r,n)=>e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>{C(t.path),k("")},className:`px-3 py-1 rounded transition-all duration-200 ${r===n.length-1?"text-white font-medium bg-white/10":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:t.name==="Files"?"Root":t.name}),r<n.length-1&&e.jsx(m,{icon:Y,className:"text-gray-600 text-xs icon-keep-color"})]},t.path))})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{icon:ee,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm icon-keep-color"}),e.jsx("input",{type:"text",placeholder:"Search files...",value:d,onChange:t=>k(t.target.value),className:"pl-9 pr-8 py-2 w-64 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 text-sm focus:outline-none focus:border-white/20 focus:bg-white/10 transition-all"}),d&&e.jsx("button",{onClick:()=>k(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:e.jsx(m,{icon:q,className:"text-xs"})})]})})]})}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-400 mt-4",children:"Loading files..."})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-3",children:[d&&e.jsxs("div",{className:"mb-4 text-sm text-gray-400",children:["Found ",v.length,' files for "',d,'"']}),v.map((t,r)=>e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:(r+3)*.1},className:"group border border-white/10 rounded-lg p-4 hover:border-white/20 hover:bg-white/5 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:`flex items-center gap-4 flex-1 min-w-0 ${t.type==="folder"&&!d?"cursor-pointer":""}`,onClick:()=>{t.type==="folder"&&!d&&N(t.path)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(m,{icon:o(t.extension,t.type),className:`text-2xl ${t.type==="folder"?"text-blue-400":"text-gray-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-base font-medium truncate mb-1 ${t.type==="folder"?"text-blue-300 hover:text-blue-200":"text-white"}`,children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:c(t.uploadDate)}),t.type==="folder"&&t.fileCount!==void 0&&e.jsxs("span",{children:[t.fileCount," files"]}),t.size&&e.jsx("span",{children:s(t.size)}),t.extension&&e.jsx("span",{className:"uppercase",children:t.extension}),d&&t.path!==`/${t.name}`&&e.jsxs("span",{className:"text-blue-400 text-xs",children:["ðŸ“ ",t.path]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.type==="file"&&e.jsxs(e.Fragment,{children:[T(t.extension)&&e.jsx("button",{onClick:()=>B(t),className:"p-2 rounded bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors touch-manipulation",style:{minHeight:"36px",minWidth:"36px"},"aria-label":"Preview",children:e.jsx(m,{icon:te,className:"text-sm"})}),e.jsx("a",{href:`/Files${t.path}`,download:t.name,className:"p-2 rounded bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors touch-manipulation",style:{minHeight:"36px",minWidth:"36px"},"aria-label":"Download",children:e.jsx(m,{icon:O,className:"text-sm"})})]}),t.type==="folder"&&e.jsx("button",{onClick:()=>P(t.path),className:"p-2 rounded bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-colors touch-manipulation",style:{minHeight:"36px",minWidth:"36px"},"aria-label":"Download folder",children:e.jsx(m,{icon:O,className:"text-sm"})})]})]})},t.id))]})})]})}),e.jsx(ce,{file:x,isOpen:u,onClose:$})]})};export{pe as default};
